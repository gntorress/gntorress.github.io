<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Projects</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://kit.fontawesome.com/969b364b0b.js" crossorigin="anonymous"></script>
</head>
<body style="background-color: black;">

<nav style="background-color: black">
    <a href="home.html">
  <img src="images/Logo.png" class="logo" alt="Logo"></a>
  <ul>
    <li><a href="home.html">Home</a></li>
    <li><a href="about.html">About</a></li>
    <li><a href="projects.html">Projects</a></li>
    <li><a href="contact.html">Contact</a></li>
  </ul>
</nav>

<div id="projects">
  <div class="container">
    <h1 class="sub-title" style="text-align: center;">Projects</h1>
    <div class="projects-layout">
      <!-- Sidebar Menu -->
      <div class="project-menu">
        <ul>
          <li><button class="project-filter active" data-filter="all">All Projects</button></li>
          <li><button class="project-filter" data-filter="school">School Projects</button></li>
          <li><button class="project-filter" data-filter="personal">Personal Projects</button></li>
          <li><button class="project-filter" data-filter="work">Work Projects</button></li>
        </ul>
      </div>

      <!-- Project Cards -->
      <div class="project-content">
        <div class="project-box school">
          <h3>AI Emotion Detection</h3>
          <p class="project-description">
            For my senior seminar project, I created an AI with Emotion Detection through face and voice. It would watch a video in a folder, and give 25 guesses on what the emotion is.
            With face alone, my project was 90%-100% accurate, while adding voice made it ~70%-80% accurate. The AI can only detect the emotion if it is exaggerated.
            If you would like to see my (very messy) code, or read my research paper, see the links below.
          </p>
          <div class="project-icons" style="text-align: center;">
            <a href="https://github.com/gntorress"><i class="fa-brands fa-github"></i></a>
            <a href="SeniorSem Paper.pdf" target="_blank"><i class="fa-solid fa-download"></i></a>
          </div>
        </div>

        <div class="project-box personal">
          <h3>Portfolio Website</h3>
          <p class="project-description">This is a short description.</p>
        </div>

        <div class="project-box work">
          <h3>Adaptive Card</h3>
          <p class="project-description">This is another short description.</p>
        </div>

        <div class="project-box work">
          <h3>Forms Repo</h3>
          <p class="project-description">Yet another short one.</p>
        </div>

        <div class="project-box school">
          <h3>Facial Detection Robot</h3>
          <p class="project-description">This description is also short.</p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div id="modal" class="modal">
  <div class="modal-box">
    <span class="close" onclick="closeModal()">&times;</span>
    <div id="modal-content"></div> <!-- changed from <p> -->
  </div>
</div>


<!-- JavaScript -->
<script>
const MAX_LENGTH = 150;

document.querySelectorAll('.project-description').forEach(desc => {
  const fullText = desc.textContent.trim();
  desc.setAttribute('data-full', fullText); // Store full text

  if (fullText.length > MAX_LENGTH) {
    const previewText = fullText.slice(0, MAX_LENGTH) + '...';

    const readMoreBtn = document.createElement('button');
    readMoreBtn.textContent = "Read More";
    readMoreBtn.classList.add('read-more-btn');

    readMoreBtn.addEventListener('click', () => {
      const projectBox = desc.closest('.project-box');
      showModalFromProject(projectBox);
    });

    desc.textContent = previewText + " ";
    desc.appendChild(readMoreBtn);
  }
});


function showModalFromProject(projectBox) {
  const modal = document.getElementById('modal');
  const modalContent = document.getElementById('modal-content');

  const title = projectBox.querySelector('h3')?.textContent || '';
  const descriptionElem = projectBox.querySelector('.project-description');
  const fullText = descriptionElem?.getAttribute('data-full') || '';
  const icons = projectBox.querySelector('.project-icons')?.cloneNode(true);

  modalContent.innerHTML = `
    <h2>${title}</h2>
    <p>${fullText}</p>
  `;

  if (icons) modalContent.appendChild(icons);

  modal.style.display = 'block';
}



  function closeModal() {
    document.getElementById('modal').style.display = 'none';
  }
</script>

<script src="functions.js"></script>
</body>
</html>
